<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Privacy Policy - Beer Tasting Club</title>
    <link rel="stylesheet" href="css/style.css?v=0.8.1">
    
    <link rel="manifest" href="/Beer-Tasting-Club/manifest.json">
    <meta name="theme-color" content="#f59e0b">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="icon" type="image/png" href="assets/icon-192.png">
    <link rel="apple-touch-icon" href="assets/icon-192.png">
</head>
<body>
    <div class="container">
        
        <div class="header-bar">
            <a href="index.html" class="header-link">
                <span class="material-symbols-outlined">arrow_back</span> Home
            </a>
        </div>

        <div style="text-align: center; margin-bottom: 30px;">
            <img src="assets/logo.png" alt="Beer Tasting Club" class="logo-large">
            <p class="home-slogan">IL TUO COMPAGNO DIGITALE DI DEGUSTAZIONE</p>
        </div>

        <h1 style="text-align: center; margin-bottom: 20px; color: var(--primary-color);">Privacy e Cookie Policy</h1>

        <div class="card text-content">
            <p><strong>Ultimo aggiornamento: In Costruzione</strong></p>
            
            <p>
                Questa pagina descrive le modalità di gestione del sito in riferimento al trattamento dei dati personali degli utenti che lo consultano.
            </p>

            <h3>1. Tipologia di dati trattati</h3>
            <p>
                Durante l'uso dell'applicazione, vengono raccolti solamente i dati essenziali per il funzionamento del servizio (es. indirizzo email per il login, dati delle schede di degustazione).
            </p>

            <h3>2. Finalità del trattamento</h3>
            <p>
                I dati vengono trattati esclusivamente per le seguenti finalità:
            </p>
            <ul>
                <li>Gestione dell'account utente.</li>
                <li>Salvataggio e sincronizzazione delle schede di degustazione.</li>
                <li>Funzionalità tecniche dell'applicazione (PWA).</li>
            </ul>

            <h3>3. Cookie e Local Storage</h3>
            <p>
                Questa applicazione utilizza il "Local Storage" del browser per garantire il funzionamento offline e mantenere la sessione attiva. Non vengono utilizzati cookie di profilazione o di terze parti per scopi pubblicitari.
            </p>
        </div>

        <footer style="text-align: center; margin-top: 40px; font-size: 1rem; color: #4b5563;">
            &copy; 2026 Beer Tasting Club <span class="footer-ver" id="footer-version">v...</span><br>
            <a href="privacy.html" style="color: inherit; text-decoration: underline;">Info Privacy e Cookie</a>
    
            <p style="text-align: center; margin-top: 5px; font-size: 0.7rem; color: #4b5563; display: flex; align-items: center; justify-content: center; gap: 4px;">
                    Crafted with love by <a href="https://www.linkedin.com/in/mirko-caiani/" target="_blank" style="color: inherit; text-decoration: underline;">Mirko Caiani</a>
            </p>
        </footer>
    </div>

    <div id="update-toast" class="update-toast">
        <span class="material-symbols-outlined">system_update</span>
        Nuova versione! Clicca qui.
    </div>

    <script type="module">
        // 1. IMPORT (TASSATIVAMENTE IN CIMA)
        import { APP_VERSION } from './js/config.js'; // Usa ./ perché siamo in root

        // 2. MOSTRA VERSIONE NEL FOOTER
        const footerVer = document.getElementById('footer-version');
        if (footerVer) footerVer.textContent = ` v${APP_VERSION}`;

        // 3. GESTIONE AGGIORNAMENTI (Service Worker Robusto)
        const updateToast = document.getElementById('update-toast');

        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('./sw.js').then(reg => {
                
                // A) Aggiornamento GIA' in attesa
                if (reg.waiting) {
                    if(updateToast) updateToast.classList.add('show');
                }

                // B) Aggiornamento trovato ORA
                reg.addEventListener('updatefound', () => {
                    const newWorker = reg.installing;
                    newWorker.addEventListener('statechange', () => {
                        if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                            if(updateToast) updateToast.classList.add('show');
                        }
                    });
                });
            }).catch(err => console.log('SW failed', err));
        }

        // Click -> Aggiorna
        if(updateToast) {
            updateToast.addEventListener('click', () => {
                if (navigator.serviceWorker.controller) {
                    window.location.reload();
                }
            });
        }
    </script>
</body>
</html>

<!-- =========================================
 A. Titolare del Trattamento

        Devi indicare chiaramente chi raccoglie i dati.
        Se sei un privato: Nome, Cognome e un indirizzo di contatto (o email dedicata alla privacy).

B. Tipologia di Dati e Finalità
    
        Nel tuo documento devi specificare perché raccogli quei dati.
        
        Email:
            Finalità: Registrazione, autenticazione, recupero password e mantenimento dello storico (archiviazione).
            Base Giuridica: Esecuzione di un contratto (fornire il servizio dell'app) o legittimo interesse.
            Nota: Specifica chiaramente che non viene usata per marketing/newsletter (questo ti evita di dover chiedere un consenso specifico per il marketing).
        
        Nome, Cognome, Qualifiche (Opzionali):
            Finalità: Personalizzazione del servizio (compilazione automatica delle schede PDF/condivise).
            Base Giuridica: Consenso dell'utente (dato che sono facoltativi e inseriti volontariamente) o esecuzione del contratto (funzionalità dell'app).

C. Condivisione dei Dati e Terze Parti

        Anche se tu non vendi i dati, la tua app si appoggia a servizi terzi?
        Hosting/Database: Dove sono salvati i dati? (es. Supabase). Devi indicare che questi fornitori potrebbero avere accesso tecnico ai dati per ospitarli. 
        Se i server sono fuori dall'UE, la questione si complica (servono clausole specifiche), ma se usi server UE sei più tranquillo.

        Invio Email (Transazionali): Usi un servizio esterno per mandare la mail di recupero password (es. SendGrid, Mailgun)? Va menzionato. No solo Supabase!

D. Diritti dell'Utente
        Devi garantire (e scrivere che garantisci) i diritti GDPR, tra cui:
            Diritto di accesso (vedere i propri dati).
            Diritto alla cancellazione ("diritto all'oblio").
            Diritto alla portabilità (scaricare i dati, cosa che la tua app già fa con i PDF).

E. Cookie Policy
        La gestione dei cookie dipende dalla tecnologia che usi.
        
        Cookie Tecnici (Essenziali)
        L'app utilizza sicuramente cookie o Local Storage per mantenere l'utente loggato (sessione).
        Obbligo: Informativa. Devi dire che usi cookie tecnici per il funzionamento del sito.
        Consenso: Non è richiesto il banner di blocco preventivo per i soli cookie tecnici. L'utente non deve "accettare" per loggarsi, perché sono necessari al servizio.

        Cookie di Profilazione o Analitici
        Se usi Google Analytics o simili per vedere quante persone usano l'app, anche se anonimizzati, potresti dover mettere il banner dei cookie.

        Profilazione: Se non fai pubblicità e non tracci il comportamento per vendere dati, non ne hai bisogno.

        Ti basta un link alla "Cookie Policy" nel footer che dice "Questo sito utilizza solo cookie tecnici necessari al funzionamento".

F. Funzionalità di Condivisione (Punto di Attenzione)
        I dati personali (nome, qualifiche) servono per "scaricare/condividere le schede". 
        Nella Privacy Policy, dovrebbe esserci una riga che spiega che:
            "Qualora l'utente decida volontariamente di generare un PDF o condividere una scheda di degustazione tramite le funzionalità dell'app, i dati inseriti nel profilo (Nome, Qualifiche) saranno visibili nel documento generato."
        Questo tutela te dal fatto che l'utente diffonda i propri dati tramite la tua app.

========================================= -->